<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover">
  <meta charset="utf-8">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <title>ResetPassword</title>
  <link rel="stylesheet" href="nicepage.css" media="screen">
  <link rel="stylesheet" href="ResetPassword.css" media="screen">
  <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
  <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
  <meta name="generator" content="Nicepage 4.21.12, nicepage.com">
  <link id="u-theme-google-font" rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i|Raleway:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i">
  <meta name="theme-color" content="#478ac9">
  <meta property="og:title" content="ResetPassword">
  <meta property="og:type" content="website">
  <script src="./script.js"></script>
  <script>
    let redirectUrl = appUrl + "Login.html";
  </script>
</head>

<body class="u-body u-xl-mode" data-lang="en">
  <div id='treasure-hunt-content' style="display: block">
    <section class="u-clearfix u-section-1" id="sec-fe1e">
      <div class="u-clearfix u-sheet u-sheet-1" style="max-width: 720px !important;">
        <img class="u-image u-image-contain u-image-default u-image-1" src="images/bgframe.png" alt=""
          data-image-width="952" data-image-height="696">
        <a class="u-border-none u-btn u-button-style u-none u-btn-1"><span class="u-file-icon u-icon u-icon-1"><img
              onclick="Submit();" src="images/changepasswordbutton.png" alt=""></span>&nbsp;
        </a>
        <div class="u-form u-form-1">
          <form action="https://forms.nicepagesrv.com/Form/Process"
            class="u-clearfix u-form-spacing-0 u-form-vertical u-inner-form" source="email" name="form"
            style="padding: 0px;">
            <div class="u-form-group u-label-none u-form-group-1">
              <label for="text-cee4" class="u-label">Input</label>
              <input type="password" placeholder="New Password" id="password" name="password"
                class="u-border-1 u-border-grey-30 u-custom-font u-heading-font u-input u-input-rectangle u-radius-50 u-white u-input-1">
            </div>
          </form>
          <div id="passError" style="color: red; font-size: 10.2px; font-weight: 600; height: 3px;margin-left: 17px;"
            class="error-message-pass"></div>
        </div>
        <div class="u-form u-form-2">
          <form action="https://forms.nicepagesrv.com/Form/Process"
            class="u-clearfix u-form-spacing-0 u-form-vertical u-inner-form" source="email" name="form"
            style="padding: 0px;">
            <div class="u-form-group u-label-none u-form-group-2">
              <label for="text-cee4" class="u-label">Input</label>
              <input type="password" placeholder="Confirm New Password" id="confirmPass" name="password_confirmation"
                class="u-border-1 u-border-grey-30 u-custom-font u-heading-font u-input u-input-rectangle u-radius-50 u-white u-input-2">
            </div>
          </form>
          <div id="passConError" style="color: red; font-size: 10.2px; font-weight: 600;margin-left: 17px;height: 3px;"
          class="error-message-passCon"></div>
        </div>
        <img id="passImg" onclick="ShowPass()"
          class="u-image u-image-contain u-image-default u-preserve-proportions u-image-2" src="images/Element1.png"
          alt="" data-image-width="71" data-image-height="41">
        <img id="cnpassImg" onclick="ShowConfirmPass()"
          class="u-image u-image-contain u-image-default u-preserve-proportions u-image-3" src="images/Element1.png"
          alt="" data-image-width="71" data-image-height="41">
        <img class="u-image u-image-contain u-image-default u-image-4" src="images/resetpassword.png" alt=""
          data-image-width="960" data-image-height="180">
        <p class="u-custom-font u-heading-font u-text u-text-1">Please enter your new passwordâ€‹.</p>
      </div>
    </section>
    <section
      class="u-black u-clearfix u-container-style u-dialog-block u-opacity u-opacity-55 u-valign-middle-lg u-valign-middle-xl u-dialog-section-4"
      id="sec-b5d3" data-dialog-show-on="page_exit" data-dialog-show-interval="3000"
      data-dialog-show-on-list="161976806">
      <img class="u-image u-image-contain u-image-default u-image-1" src="images/verifyemailbgframe.png" alt=""
        data-image-width="904" data-image-height="808">
      <div
        class="u-align-justify-xs u-align-left-lg u-align-left-md u-align-left-sm u-align-left-xl u-container-style u-dialog u-opacity u-opacity-5 u-shape-rectangle u-white u-dialog-1">
        <div class="u-container-layout u-valign-top-lg u-valign-top-xl u-container-layout-1">
          <a href="https://nicepage.com/one-page-template" class="u-border-none u-btn u-button-style u-none u-btn-1">
            &nbsp;</a>
          <h6 class="u-align-center-md u-align-center-sm u-align-center-xs u-text u-text-1">Request Password Failed</h6>
          <h6 class="u-align-center-md u-align-center-sm u-align-center-xs u-text u-text-2">Reset password
            failed,<br>please try again
          </h6>
        </div>
      </div>
      <img onclick="CloseFailed();" class="u-image u-image-contain u-image-default u-preserve-proportions u-image-2"
        src="images/gobackbutton.png" alt="" data-image-width="394" data-image-height="122">
      <img class="u-image u-image-contain u-image-default u-preserve-proportions u-image-3" src="images/invalidicon.png"
        alt="" data-image-width="280" data-image-height="280">
    </section>

    </section>
    <section
      class="u-black u-clearfix u-container-style u-dialog-block u-opacity u-opacity-55 u-valign-middle-lg u-valign-middle-xl u-dialog-section-5"
      id="sucesspop" data-dialog-show-on="page_exit" data-dialog-show-interval="3000"
      data-dialog-show-on-list="161976806">
      <img class="u-image u-image-contain u-image-default u-image-1" src="images/verifyemailbgframe.png" alt=""
        data-image-width="904" data-image-height="808">
      <div
        class="u-align-justify-xs u-align-left-lg u-align-left-md u-align-left-sm u-align-left-xl u-container-style u-dialog u-opacity u-opacity-5 u-shape-rectangle u-white u-dialog-1">
        <div class="u-container-layout u-valign-top-lg u-valign-top-xl u-container-layout-1">
          <a href="https://nicepage.com/one-page-template" class="u-border-none u-btn u-button-style u-none u-btn-1">
            &nbsp;</a>
          <h6 class="u-align-center-md u-align-center-sm u-align-center-xs u-text u-text-1">Password Changed</h6>
          <h6 class="u-align-center-md u-align-center-sm u-align-center-xs u-text u-text-2">Your password
            has&nbsp;been&nbsp;<br>successfully changed
          </h6>
        </div>
      </div>
      <img onclick="BackLoginPage();" class="u-image u-image-contain u-image-default u-preserve-proportions u-image-2"
        src="images/Clickheretologin.png" alt="" data-image-width="394" data-image-height="122">
      <img class="u-image u-image-contain u-image-default u-preserve-proportions u-image-3" src="images/tickicom.png"
        alt="" data-image-width="276" data-image-height="248">
    </section>

    <style>
      input[type=email]:focus {
        border: 2px solid #fc6130;
      }

      input[type=password]:focus {
        border: 2px solid #fc6130;
      }

      .u-btn-1:hover {
        -webkit-filter: brightness(80%);
      }

      .u-dialog-section-5 {
        min-height: 1154px;
      }

      .u-dialog-section-5 .u-image-1 {
        width: 539px;
        height: 504px;
        margin: 429px calc(((100% - 720px) / 2) + 85px) 0 auto;
      }

      .u-dialog-section-5 .u-dialog-1 {
        width: 800px;
        margin: -613px auto 0;
      }

      .u-dialog-section-5 .u-container-layout-1 {
        padding: 30px;
      }

      .u-dialog-section-5 .u-btn-1 {
        border-style: none;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        margin: 311px auto 0;
        padding: 0;
      }

      .u-dialog-section-5 .u-text-1 {
        width: auto;
        font-weight: 700;
        font-size: 1.125rem;
        margin: -469px -231px 0 auto;
      }

      .u-dialog-section-5 .u-text-2 {
        font-size: 1.875rem;
        width: auto;
        font-weight: 500;
        margin: 7px -433px 0 809px;
      }

      .u-dialog-section-5 .u-icon-1 {
        width: 20px;
        height: 20px;
      }

      .u-dialog-section-5 .u-image-2 {
        width: 65px;
        height: 65px;
        margin: 362px calc(((100% - 720px) / 2) + 75px) 60px auto;
      }

      .u-dialog-section-5 .u-image-3 {
        width: 212px;
        height: 212px;
        margin: 111px auto 0;
      }

      @media (max-width: 2000px) {
        .u-dialog-section-5 {
          min-height: 1924px;
        }

        .u-dialog-section-5 .u-image-1 {
          width: 539px;
          margin-top: 263px;
          margin-right: auto;
        }

        .u-dialog-section-5 .u-dialog-1 {
          width: 720px;
          height: auto;
          min-height: 835px;
          margin-top: -643px;
        }

        .u-dialog-section-5 .u-container-layout-1 {
          padding: 0;
        }

        .u-dialog-section-5 .u-btn-1 {
          margin-top: 717px;
        }

        .u-dialog-section-5 .u-text-1 {
          font-size: 1.875rem;
          width: 414px;
          margin-top: -559px;
          margin-right: auto;
        }

        .u-dialog-section-5 .u-text-2 {
          font-size: 1.5rem;
          width: 454px;
          margin-top: 251px;
          margin-left: auto;
          margin-right: auto;
        }

        .u-dialog-section-5 .u-image-2 {
          width: 249px;
          height: 77px;
          margin-top: -250px;
          margin-right: auto;
          margin-bottom: 0;
        }

        .u-dialog-section-5 .u-image-3 {
          width: 212px;
          height: 212px;
          margin-top: -422px;
          margin-bottom: 60px;
        }
      }

      @media (max-width: 767px) {
        .u-dialog-section-5 {
          min-height: 1332px;
        }

        .u-dialog-section-5 .u-image-1 {
          width: 539px;
          height: 505px;
          margin-top: 199px;
        }

        .u-dialog-section-5 .u-dialog-1 {
          width: 540px;
          margin-top: -644px;
        }

        .u-dialog-section-5 .u-btn-1 {
          margin-top: 207px;
        }

        .u-dialog-section-5 .u-text-1 {
          width: 414px;
          margin-top: -559px;
          margin-right: -231px;
        }

        .u-dialog-section-5 .u-text-2 {
          width: 454px;
        }

        .u-dialog-section-5 .u-image-2 {
          width: 249px;
          height: 77px;
          margin-top: -626px;
        }

        .u-dialog-section-5 .u-image-3 {
          width: 212px;
          height: 212px;
          margin-top: -422px;
        }
      }

      @media (max-width: 575px) {

        .u-dialog-section-5 .u-image-1 {
          width: 291px;
          height: 275px;
          margin-top: 186px;
        }

        .u-dialog-section-5 .u-dialog-1 {
          width: 338px;
          margin-top: -447px;
        }

        .u-dialog-section-5 .u-btn-1 {
          margin-top: 472px;
        }

        .u-dialog-section-5 .u-text-1 {
          width: auto;
          font-size: 1rem;
          margin-top: -299px;
          margin-left: -1px;
          margin-right: -1px;
        }

        .u-dialog-section-5 .u-text-2 {
          font-size: 0.875rem;
          width: auto;
          margin-top: 132px;
          margin-left: 31px;
          margin-right: 31px;
        }

        .u-dialog-section-5 .u-icon-1 {
          left: auto;
          top: 35px;
          position: absolute;
          right: 16px;
        }

        .u-dialog-section-5 .u-image-2 {
          width: 162px;
          height: 50px;
          margin-top: -424px;
        }

        .u-dialog-section-5 .u-image-3 {
          width: 120px;
          height: 108px;
          margin-top: -226px;
        }
      }
    </style>
  </div>
  <script src="./deviceOrientationHandler.js"></script>
</body>

</html>

<script>
  function OpenFailed() {
    var x = document.getElementById("sec-b5d3");
    x.style.display = "block";

  }
  function CloseFailed() {
    var x = document.getElementById("sec-b5d3");
    x.style.display = "none";

  }
  function OpenSuccess() {
    var x = document.getElementById("sucesspop");
    x.style.display = "block";

  }
  function BackLoginPage() {
    window.location.replace(redirectUrl);
  }
  // form.addEventListener("submit", Submit);
  function CheckPassword() {
    var match = true;
    const password = document.querySelector('input[name=password]');
    const confirm = document.querySelector('input[name=password_confirmation]');
    if (confirm.value === password.value) {
      // confirm.setCustomValidity('');
      match = true;
    } else {
      //confirm.setCustomValidity('Passwords do not match');
      match = false;
    }
    return match;
  }
  async function Submit() {
    if (document.querySelector('input[name=password]').value.length < 8) {
       document.getElementById('passError').innerHTML = "Password must have at least 8 characters";
       document.getElementById('passConError').innerHTML = "";
    }
    else {
      document.getElementById('passError').innerHTML = "";
      if (CheckPassword() === false) {
          document.getElementById('passConError').innerHTML = "Confirm password should be match with new password";

      }
      else {
        document.getElementById('passConError').innerHTML = "";
        document.getElementById('passError').innerHTML = "";
        const urlParams = new URLSearchParams(window.location.search);
        var token = urlParams.get('token');
        var email = urlParams.get('email');
        if (urlParams.has('url')) {
          const url = urlParams.get('url');
          if (url != '' && url != null)
            redirectUrl = url;
        }
        var password = document.querySelector('input[name=password]').value;
        var confirm = document.querySelector('input[name=password_confirmation]').value; 
        var myBody = {
          "token": token,
          "email": email,
          "password": password,
          "password_confirmation": confirm,
        };
        fetch(apiDomain + 'api/reset-password',
          {
            method: 'POST',
            body: JSON.stringify(myBody),
            redirect: 'follow',
            headers: {
              'Content-Type': 'application/json'
            }
          }).then(response => response.json())
          .then(jsondata => {
            var status = jsondata.status;
            if (status === false) {
              OpenFailed();
            }
            else {
              const delay = ms => new Promise(res => setTimeout(res, ms));
              delay(3000);
              OpenSuccess();
            }
          })
      }
    }
  }


  function ShowPass() {
    var s = document.getElementById("password");
    if (document.getElementById("passImg").getAttribute("src") === "images/Element1.png") {
      document.getElementById("passImg").src = "images/Unviewpassword.png";
    }
    else {
      document.getElementById("passImg").src = "images/Element1.png"
    }
    s.type = s.type == "password" ? "text" : "password";

  }
  function ShowConfirmPass() {
    var s = document.getElementById("confirmPass");
    if (document.getElementById("cnpassImg").getAttribute("src") === "images/Element1.png") {
      document.getElementById("cnpassImg").src = "images/Unviewpassword.png";
    }
    else {
      document.getElementById("cnpassImg").src = "images/Element1.png"
    }
    s.type = s.type == "password" ? "text" : "password";

  }
</script>